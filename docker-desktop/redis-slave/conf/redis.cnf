# Redis 从节点配置文件

# *************** 网络配置 *************** #
bind 0.0.0.0
protected-mode yes
port 6379
timeout 0

# *************** 基础配置 *************** #
daemonize no
pidfile /var/run/redis.pid
loglevel notice

# *************** 持久化配置(RDB) *************** #
save 900 1
save 300 10
save 60 10000
rdbcompression yes
dbfilename dump.rdb
dir /data

# *************** 安全配置 *************** #
requirepass 123456
masterauth 123456

# *************** 主从复制配置 *************** #
# 使用容器名称而不是IP
replicaof 172.20.0.20 6379
replica-read-only yes
repl-timeout 120

# *************** 复制优化配置 *************** #
# 增加复制缓冲区大小
repl-backlog-size 10mb
# 禁用TCP_NODELAY以获得更好的带宽使用
repl-disable-tcp-nodelay no
# 设置复制客户端输出缓冲区限制
client-output-buffer-limit replica 256mb 64mb 60